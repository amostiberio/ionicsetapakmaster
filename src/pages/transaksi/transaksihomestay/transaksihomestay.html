<!--
  Generated template for the TransaksihomestayPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header >
    <ion-navbar color= "navbar">
        <ion-title>
            <span class="firstline">Detil Transaksi</span>
        </ion-title>
    </ion-navbar>
  </ion-header>



<ion-content>
<div>
    <ion-card class="full-card">          
            <button ion-item >
                <ion-avatar item-start>
                        <img *ngIf="dataTransaksi?.transaction_status <= 1" class ="notround" src="assets/imgs/logo/payment.png">
                        <img *ngIf="dataTransaksi?.transaction_status == 2" class ="notround" src="assets/imgs/logo/paymentdone.png">
                        <img *ngIf="dataTransaksi?.transaction_status == 3 " class ="notround" src="assets/imgs/logo/check-in.png">  
                        <img *ngIf="dataTransaksi?.transaction_status == 4" class ="notround" src="assets/imgs/logo/check-out.png">                      
                        <img *ngIf="dataTransaksi?.transaction_status == 5" class ="notround" src="assets/imgs/logo/handshake.png">   
                        <img *ngIf="dataTransaksi?.transaction_status >= 7" class ="notround" src="assets/imgs/logo/transaksicancel.png">          
       
                </ion-avatar>                  
                <h6 class="keterangantextlisttransaksi">Status</h6> 
                              
                       
                <h5 class="textlisttransaksi" text-wrap *ngIf="dataTransaksi?.transaction_status == 0"><b>Belum Konfirmasi Pembayaran</b></h5>
                <h5 class="textlisttransaksi" text-wrap *ngIf="dataTransaksi?.transaction_status == 1"><b>Menunggu Verifikasi Pembayaran</b></h5>
                <h5 class="textlisttransaksi" text-wrap *ngIf="dataTransaksi?.transaction_status == 2"><b>Pembayaran telah diverifikasi</b></h5>
                <a text-wrap *ngIf="dataTransaksi?.transaction_status == 2" class="noteinfotransaksi">Menunggu Proses Pemakaian Homestay</a>                             
                <h5 class="textlisttransaksi" text-wrap *ngIf="dataTransaksi?.transaction_status == 3"><b>Penggunaan Homestay sedang berjalan</b></h5>                   
                <h5 class="textlisttransaksi" text-wrap *ngIf="dataTransaksi?.transaction_status == 4"><b>Penggunaan Homestay telah selesai</b></h5>                   
                <h5 class="textlisttransaksi" text-wrap *ngIf="dataTransaksi?.transaction_status == 5"><b>Transaksi selesai</b></h5>
                <h5 class="textlisttransaksi" text-wrap *ngIf="dataTransaksi?.transaction_status == 7"><b>Transaksi dibatalkan oleh anda</b></h5>
                <h5 class="textlisttransaksi" text-wrap *ngIf="dataTransaksi?.transaction_status == 8"><b>Transaksi dibatalkan oleh pemandu</b></h5>
                <h5 class="textlisttransaksi" text-wrap *ngIf="dataTransaksi?.transaction_status == 9"><b>Transaksi dibatalkan oleh admin</b></h5>
                <a text-wrap *ngIf="dataTransaksi?.transaction_status == 9" class="noteinfotransaksi">Transaksi melewati batas waktu pembayaran</a>                             

            </button>         
        </ion-card>

        <ion-card class ="full-card-homenamecard-padding-left">
                <ion-grid>           
                    <ion-row>
                        <ion-col>
                          <a class ="smallfont" color="primary">Check In</a>
                        </ion-col>
                        <ion-col>
                          <a class ="smallfont" color="primary">Check Out</a>
                        </ion-col>
                        <ion-col>
                          <a class ="smallfont" color="primary">Duration</a>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                          <ion-col>
                            <a class="textfont">{{dataTransaksi?.check_in | date: "dd MMM yyyy"}}</a>                 
                          </ion-col>
                          <ion-col>
                            <a class="textfont">{{dataTransaksi?.check_out| date: "dd MMM yyyy"}}</a>
                          </ion-col>
                          <ion-col >
                            <a class="textfont">{{dataTransaksi?.jumlah_hari}} night(s)</a>
                          </ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-col>
                                <a class="textfont">{{dataTransaksi?.check_in| date: "EEE, HH:mm"}}</a>
                              </ion-col>
                            <ion-col>
                                <a class="textfont">{{dataTransaksi?.check_out| date: "EEE, HH:mm"}}</a>
                            </ion-col>
                            <ion-col>                      
                            </ion-col>
                        </ion-row>
                             <ion-row>
                                <ion-col>
                                  <a class ="smallfont" color="primary">Notes</a>
                                </ion-col>                            
                            </ion-row> 
                            <ion-row>
                                <ion-col>
                                <a class ="textfont" color="primary">{{dataTransaksi?.noteswisatawan}}</a>
                                </ion-col>                           
                            </ion-row>
                            <ion-row>
                                <ion-col>
                                    <a class ="smallfont" color="primary">Kontak Pemandu</a>
                                </ion-col>                            
                            </ion-row> 
                            <ion-row>
                                <ion-col>
                                <a class ="textfont" color="primary">{{dataPemandu?.dataUser?.no_hp}}</a>
                                </ion-col>                               
                                <ion-col>                                    
                                <a href="https://wa.me/62{{dataPemandu?.dataUser?.no_hp}}"  color="green" clear>                                    
                                    <ion-icon padding-right float-right name="logo-whatsapp" color="green">                                        
                                    </ion-icon>
                                </a>                                            
                                </ion-col>                           
                            </ion-row>
                  </ion-grid>                  
            </ion-card>
</div>
        
<div padding>
        <ion-card class ="full-card-homenamecard">
            <button ion-item (click)="homestaydetail(dataHomestay?.homestay_id)">
                        <ion-avatar  item-start>
                          <img src="{{BASE_URL+dataHomestay?.mainphoto}}" class="avatarhomestay">
                        </ion-avatar>
                        <h6 class="padding1px" ><b class="padding1px" color="primary">{{dataHomestay?.nama_homestay}}</b></h6> 
                        <a class class="alamat" color="primary"> {{dataAlamatCategory?.kecamatan}}, {{dataAlamatCategory?.kabupaten}}, {{dataAlamatCategory?.provinsi}}</a>                
            </button>                 
        </ion-card>
</div>
<div>
      <ion-card class ="full-card-homenamecard-padding-left">
          <ion-grid>
              <ion-row>
                    <ion-col>
                            <a class ="smallfont" color="primary">Detail Harga</a>
                          </ion-col> 
                  
              </ion-row>           
              <ion-row>                   
                  <ion-col>
                    <a class ="textfont">{{dataHomestay?.nama_homestay}}</a>
                  </ion-col>
                  <ion-col >
                      <a float-right class ="textfont">{{dataHomestay?.harga_perhari | currency:'IDR ':true}}</a>
                  </ion-col>                
              </ion-row>
              <ion-row>
                  <ion-col>
                    <a class ="textfont">Duration</a>
                  </ion-col>
                  <ion-col align-self-end>
                      <a float-right class ="textfont">{{dataTransaksi?.jumlah_hari}} night(s)</a>
                  </ion-col>                
              </ion-row>
              <ion-row>
                    <ion-col>
                      <a class ="textfont">Kode Unik</a>
                    </ion-col>
                    <ion-col align-self-end>
                        <a float-right class ="textfont">{{dataTransaksi?.total_harga - (dataHomestay?.harga_perhari*dataTransaksi?.jumlah_hari )| currency:'IDR ':true}}</a>
                    </ion-col>                
                </ion-row>                             
            </ion-grid>                  
      </ion-card>
  </div>
  <div>
      <ion-card class ="full-card-homenamecard-padding-left">
          <ion-grid>           
              <ion-row>
                  <ion-col>
                    <a class ="textfont">Total</a>
                  </ion-col>
                  <ion-col align-self-end>
                      <a float-right class ="textfont">{{dataTransaksi?.total_harga | currency:'IDR ':true}}</a>
                  </ion-col>                
              </ion-row>              
            </ion-grid>                  
      </ion-card>
  </div>
  <div padding>
        <button *ngIf="dataTransaksi?.transaction_status == 0 || dataTransaksi?.transaction_status == 1" ion-button icon-start block no-margin color="primary" class="buttontransaksi" (click)="caraPembayaran()" tappable >
            Cara Pembayaran
            </button>
        <button *ngIf="dataTransaksi?.transaction_status == 0 || dataTransaksi?.transaction_status == 1" ion-button icon-start block no-margin color="primary" class="buttontransaksi" (click)="uploadBuktiPembayaran()" tappable >
            Upload Bukti Pembayaran
        </button>
        <button *ngIf="dataTransaksi?.transaction_status == 3" ion-button icon-start block no-margin color="primary" class="buttontransaksi" (click)="konfirmasiTransaksi(dataTransaksi?.transaction_id)" tappable >
            Konfirmasi Transaksi Selesai
        </button>
        <button *ngIf="dataTransaksi?.transaction_status >= 4 && reviewExist != true " ion-button icon-start block no-margin color="primary" class="buttontransaksi" (click)="addReview(dataTransaksi?.transaction_id)" tappable >
            Tambah Review
        </button>
        <button *ngIf="dataTransaksi?.transaction_status == 0" ion-button icon-start block no-margin color="primary" class="buttontransaksi samebackground" (click)="cancelTransaksi(dataTransaksi?.transaction_status,dataTransaksi?.transaction_id)" tappable >
            Batalkan Transaksi
        </button>   
  </div>
  
</ion-content>
